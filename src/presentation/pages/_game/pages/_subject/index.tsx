import { faker } from '@faker-js/faker';
import { FC, Fragment, ReactNode, useEffect, useMemo, useRef } from 'react';

import {
  BakingPaper,
  Button,
  Icon,
  IconButton,
  Input,
  Popover,
  Ripple,
} from '@presentation/components';
import {
  useGame,
  useNavigate,
  usePlayer,
  useStates,
  useSubject,
  useToast,
} from '@presentation/hooks';

import { useTipToast } from './hooks';

import { ColorSelector } from '../../components';

import { SubjectExistsProxy } from './proxies';

import {
  Buttons,
  Content,
  IconOption,
  IconSelector,
  PopoverContent,
  PopoverSection,
  PopoverSectionTitle,
} from './styles';

const emojis = {
  'Smileys & Pessoas': [
    'ğŸ˜€',
    'ğŸ˜ƒ',
    'ğŸ˜„',
    'ğŸ˜',
    'ğŸ˜†',
    'ğŸ˜…',
    'ğŸ˜‚',
    'ğŸ¤£',
    'ğŸ˜Š',
    'ğŸ˜‡',
    'ğŸ™‚',
    'ğŸ™ƒ',
    'ğŸ˜‰',
    'ğŸ˜Œ',
    'ğŸ˜',
    'ğŸ¥°',
    'ğŸ˜˜',
    'ğŸ˜—',
    'ğŸ˜™',
    'ğŸ˜š',
    'ğŸ˜‹',
    'ğŸ˜›',
    'ğŸ˜œ',
    'ğŸ¤ª',
    'ğŸ˜',
    'ğŸ¤‘',
    'ğŸ¤—',
    'ğŸ¤­',
    'ğŸ¤«',
    'ğŸ¤”',
    'ğŸ¤',
    'ğŸ¤¨',
    'ğŸ˜',
    'ğŸ˜‘',
    'ğŸ˜¶',
    'ğŸ˜',
    'ğŸ˜’',
    'ğŸ™„',
    'ğŸ˜¬',
    'ğŸ¤¥',
    'ğŸ˜”',
    'ğŸ˜ª',
    'ğŸ¤¤',
    'ğŸ˜´',
    'ğŸ˜·',
    'ğŸ¤’',
    'ğŸ¤•',
    'ğŸ¤¢',
    'ğŸ¤®',
    'ğŸ¤§',
    'ğŸ˜µ',
    'ğŸ¤¯',
    'ğŸ¤ ',
    'ğŸ¥³',
    'ğŸ˜',
    'ğŸ¤“',
    'ğŸ§',
    'ğŸ˜•',
    'ğŸ˜Ÿ',
    'ğŸ™',
    'â˜¹ï¸',
    'ğŸ˜®',
    'ğŸ˜¯',
    'ğŸ˜²',
    'ğŸ˜³',
    'ğŸ¥º',
    'ğŸ˜¦',
    'ğŸ˜§',
    'ğŸ˜¨',
    'ğŸ˜°',
    'ğŸ˜¥',
    'ğŸ˜¢',
    'ğŸ˜­',
    'ğŸ˜±',
    'ğŸ˜–',
    'ğŸ˜£',
    'ğŸ˜',
    'ğŸ˜“',
    'ğŸ˜©',
    'ğŸ˜«',
    'ğŸ¥±',
    'ğŸ˜¤',
    'ğŸ˜¡',
    'ğŸ˜ ',
    'ğŸ¤¬',
    'ğŸ˜ˆ',
    'ğŸ‘¿',
    'ğŸ’€',
    'â˜ ï¸',
    'ğŸ’©',
    'ğŸ¤¡',
    'ğŸ‘¹',
    'ğŸ‘º',
    'ğŸ‘»',
    'ğŸ‘½',
    'ğŸ‘¾',
    'ğŸ¤–',
    'ğŸ˜º',
    'ğŸ˜¸',
    'ğŸ˜¹',
    'ğŸ˜»',
    'ğŸ˜¼',
    'ğŸ˜½',
    'ğŸ™€',
    'ğŸ˜¿',
    'ğŸ˜¾',
    'ğŸ™ˆ',
    'ğŸ™‰',
    'ğŸ™Š',
    'ğŸ’‹',
    'ğŸ‘‹',
    'ğŸ¤š',
    'ğŸ–ï¸',
    'âœ‹',
    'ğŸ––',
    'ğŸ‘Œ',
    'ğŸ¤Œ',
    'ğŸ¤',
    'âœŒï¸',
    'ğŸ¤',
    'ğŸ¤Ÿ',
    'ğŸ¤˜',
    'ğŸ¤™',
    'ğŸ‘ˆ',
    'ğŸ‘‰',
    'ğŸ‘†',
    'ğŸ–•',
    'ğŸ‘‡',
    'â˜ï¸',
    'ğŸ‘',
    'ğŸ‘',
    'âœŠ',
    'ğŸ‘Š',
    'ğŸ¤›',
    'ğŸ¤œ',
    'ğŸ‘',
    'ğŸ™Œ',
    'ğŸ‘',
    'ğŸ¤²',
    'ğŸ¤',
    'ğŸ™',
    'âœï¸',
    'ğŸ’…',
    'ğŸ¤³',
    'ğŸ’ª',
    'ğŸ¦¾',
    'ğŸ¦µ',
    'ğŸ¦¿',
    'ğŸ¦¶',
    'ğŸ‘‚',
    'ğŸ¦»',
    'ğŸ‘ƒ',
    'ğŸ§ ',
    'ğŸ¦·',
    'ğŸ¦´',
    'ğŸ‘€',
    'ğŸ‘ï¸',
    'ğŸ‘…',
    'ğŸ‘„',
    'ğŸ«¦',
    'ğŸ§‘',
    'ğŸ‘¶',
    'ğŸ§’',
    'ğŸ‘¦',
    'ğŸ‘§',
    'ğŸ§‘â€ğŸ¦±',
    'ğŸ‘¨â€ğŸ¦±',
    'ğŸ‘©â€ğŸ¦±',
    'ğŸ§‘â€ğŸ¦°',
    'ğŸ‘¨â€ğŸ¦°',
    'ğŸ‘©â€ğŸ¦°',
    'ğŸ§‘â€ğŸ¦³',
    'ğŸ‘¨â€ğŸ¦³',
    'ğŸ‘©â€ğŸ¦³',
    'ğŸ§‘â€ğŸ¦²',
    'ğŸ‘¨â€ğŸ¦²',
    'ğŸ‘©â€ğŸ¦²',
    'ğŸ§”',
    'ğŸ‘±',
    'ğŸ‘±â€â™‚ï¸',
    'ğŸ‘±â€â™€ï¸',
    'ğŸ‘¨',
    'ğŸ‘©',
    'ğŸ§“',
    'ğŸ‘´',
    'ğŸ‘µ',
    'ğŸ™',
    'ğŸ™â€â™‚ï¸',
    'ğŸ™â€â™€ï¸',
    'ğŸ™',
    'ğŸ™â€â™‚ï¸',
    'ğŸ™â€â™€ï¸',
    'ğŸ™…',
    'ğŸ™…â€â™‚ï¸',
    'ğŸ™…â€â™€ï¸',
    'ğŸ™†',
    'ğŸ™†â€â™‚ï¸',
    'ğŸ™†â€â™€ï¸',
    'ğŸ’',
    'ğŸ’â€â™‚ï¸',
    'ğŸ’â€â™€ï¸',
    'ğŸ™‹',
    'ğŸ™‹â€â™‚ï¸',
    'ğŸ™‹â€â™€ï¸',
    'ğŸ§',
    'ğŸ§â€â™‚ï¸',
    'ğŸ§â€â™€ï¸',
    'ğŸ™‡',
    'ğŸ™‡â€â™‚ï¸',
    'ğŸ™‡â€â™€ï¸',
    'ğŸ¤¦',
    'ğŸ¤¦â€â™‚ï¸',
    'ğŸ¤¦â€â™€ï¸',
    'ğŸ¤·',
    'ğŸ¤·â€â™‚ï¸',
    'ğŸ¤·â€â™€ï¸',
    'ğŸ§‘â€âš•ï¸',
    'ğŸ‘¨â€âš•ï¸',
    'ğŸ‘©â€âš•ï¸',
    'ğŸ§‘â€ğŸ“',
    'ğŸ‘¨â€ğŸ“',
    'ğŸ‘©â€ğŸ“',
    'ğŸ§‘â€ğŸ«',
    'ğŸ‘¨â€ğŸ«',
    'ğŸ‘©â€ğŸ«',
    'ğŸ§‘â€âš–ï¸',
    'ğŸ‘¨â€âš–ï¸',
    'ğŸ‘©â€âš–ï¸',
    'ğŸ§‘â€ğŸŒ¾',
    'ğŸ‘¨â€ğŸŒ¾',
    'ğŸ‘©â€ğŸŒ¾',
    'ğŸ§‘â€ğŸ³',
    'ğŸ‘¨â€ğŸ³',
    'ğŸ‘©â€ğŸ³',
    'ğŸ§‘â€ğŸ”§',
    'ğŸ‘¨â€ğŸ”§',
    'ğŸ‘©â€ğŸ”§',
    'ğŸ§‘â€ğŸ­',
    'ğŸ‘¨â€ğŸ­',
    'ğŸ‘©â€ğŸ­',
    'ğŸ§‘â€ğŸ’¼',
    'ğŸ‘¨â€ğŸ’¼',
    'ğŸ‘©â€ğŸ’¼',
    'ğŸ§‘â€ğŸ”¬',
    'ğŸ‘¨â€ğŸ”¬',
    'ğŸ‘©â€ğŸ”¬',
    'ğŸ§‘â€ğŸ’»',
    'ğŸ‘¨â€ğŸ’»',
    'ğŸ‘©â€ğŸ’»',
    'ğŸ§‘â€ğŸ¤',
    'ğŸ‘¨â€ğŸ¤',
    'ğŸ‘©â€ğŸ¤',
    'ğŸ§‘â€ğŸ¨',
    'ğŸ‘¨â€ğŸ¨',
    'ğŸ‘©â€ğŸ¨',
    'ğŸ§‘â€âœˆï¸',
    'ğŸ‘¨â€âœˆï¸',
    'ğŸ‘©â€âœˆï¸',
    'ğŸ§‘â€ğŸš€',
    'ğŸ‘¨â€ğŸš€',
    'ğŸ‘©â€ğŸš€',
    'ğŸ§‘â€ğŸš’',
    'ğŸ‘¨â€ğŸš’',
    'ğŸ‘©â€ğŸš’',
    'ğŸ‘®',
    'ğŸ‘®â€â™‚ï¸',
    'ğŸ‘®â€â™€ï¸',
    'ğŸ•µï¸',
    'ğŸ•µï¸â€â™‚ï¸',
    'ğŸ•µï¸â€â™€ï¸',
    'ğŸ’‚',
    'ğŸ’‚â€â™‚ï¸',
    'ğŸ’‚â€â™€ï¸',
    'ğŸ‘·',
    'ğŸ‘·â€â™‚ï¸',
    'ğŸ‘·â€â™€ï¸',
    'ğŸ¤´',
    'ğŸ‘¸',
    'ğŸ‘³',
    'ğŸ‘³â€â™‚ï¸',
    'ğŸ‘³â€â™€ï¸',
    'ğŸ‘²',
    'ğŸ§•',
    'ğŸ¤µ',
    'ğŸ¤µâ€â™‚ï¸',
    'ğŸ¤µâ€â™€ï¸',
    'ğŸ‘°',
    'ğŸ‘°â€â™‚ï¸',
    'ğŸ‘°â€â™€ï¸',
    'ğŸ¤°',
    'ğŸ¤±',
    'ğŸ‘©â€ğŸ¼',
    'ğŸ‘¨â€ğŸ¼',
    'ğŸ§‘â€ğŸ¼',
    'ğŸ‘¼',
    'ğŸ…',
    'ğŸ¤¶',
    'ğŸ§‘â€ğŸ„',
    'ğŸ¦¸',
    'ğŸ¦¸â€â™‚ï¸',
    'ğŸ¦¸â€â™€ï¸',
    'ğŸ¦¹',
    'ğŸ¦¹â€â™‚ï¸',
    'ğŸ¦¹â€â™€ï¸',
    'ğŸ§™',
    'ğŸ§™â€â™‚ï¸',
    'ğŸ§™â€â™€ï¸',
    'ğŸ§š',
    'ğŸ§šâ€â™‚ï¸',
    'ğŸ§šâ€â™€ï¸',
    'ğŸ§›',
    'ğŸ§›â€â™‚ï¸',
    'ğŸ§›â€â™€ï¸',
    'ğŸ§œ',
    'ğŸ§œâ€â™‚ï¸',
    'ğŸ§œâ€â™€ï¸',
    'ğŸ§',
    'ğŸ§â€â™‚ï¸',
    'ğŸ§â€â™€ï¸',
    'ğŸ§',
    'ğŸ§â€â™‚ï¸',
    'ğŸ§â€â™€ï¸',
    'ğŸ§Ÿ',
    'ğŸ§Ÿâ€â™‚ï¸',
    'ğŸ§Ÿâ€â™€ï¸',
    'ğŸ§Œ',
    'ğŸ•´ï¸',
    'ğŸ’ƒ',
    'ğŸ•º',
    'ğŸ‘¯',
    'ğŸ‘¯â€â™‚ï¸',
    'ğŸ‘¯â€â™€ï¸',
    'ğŸ§–',
    'ğŸ§–â€â™‚ï¸',
    'ğŸ§–â€â™€ï¸',
    'ğŸ§—',
    'ğŸ§—â€â™‚ï¸',
    'ğŸ§—â€â™€ï¸',
    'ğŸ¤º',
    'ğŸ‡',
    'â›·ï¸',
    'ğŸ‚',
    'ğŸŒï¸',
    'ğŸŒï¸â€â™‚ï¸',
    'ğŸŒï¸â€â™€ï¸',
    'ğŸ„',
    'ğŸ„â€â™‚ï¸',
    'ğŸ„â€â™€ï¸',
    'ğŸš£',
    'ğŸš£â€â™‚ï¸',
    'ğŸš£â€â™€ï¸',
    'ğŸŠ',
    'ğŸŠâ€â™‚ï¸',
    'ğŸŠâ€â™€ï¸',
    'â›¹ï¸',
    'â›¹ï¸â€â™‚ï¸',
    'â›¹ï¸â€â™€ï¸',
    'ğŸ‹ï¸',
    'ğŸ‹ï¸â€â™‚ï¸',
    'ğŸ‹ï¸â€â™€ï¸',
    'ğŸš´',
    'ğŸš´â€â™‚ï¸',
    'ğŸš´â€â™€ï¸',
    'ğŸšµ',
    'ğŸšµâ€â™‚ï¸',
    'ğŸšµâ€â™€ï¸',
    'ğŸ¤¸',
    'ğŸ¤¸â€â™‚ï¸',
    'ğŸ¤¸â€â™€ï¸',
    'ğŸ¤¼',
    'ğŸ¤¼â€â™‚ï¸',
    'ğŸ¤¼â€â™€ï¸',
    'ğŸ¤½',
    'ğŸ¤½â€â™‚ï¸',
    'ğŸ¤½â€â™€ï¸',
    'ğŸ¤¾',
    'ğŸ¤¾â€â™‚ï¸',
    'ğŸ¤¾â€â™€ï¸',
    'ğŸ¤¹',
    'ğŸ¤¹â€â™‚ï¸',
    'ğŸ¤¹â€â™€ï¸',
    'ğŸ§˜',
    'ğŸ§˜â€â™‚ï¸',
    'ğŸ§˜â€â™€ï¸',
    'ğŸ›€',
    'ğŸ›Œ',
    'ğŸ§‘â€ğŸ¤â€ğŸ§‘',
    'ğŸ‘­',
    'ğŸ‘«',
    'ğŸ‘¬',
    'ğŸ’',
    'ğŸ‘©â€â¤ï¸â€ğŸ’‹â€ğŸ‘¨',
    'ğŸ‘¨â€â¤ï¸â€ğŸ’‹â€ğŸ‘¨',
    'ğŸ‘©â€â¤ï¸â€ğŸ’‹â€ğŸ‘©',
    'ğŸ’‘',
    'ğŸ‘©â€â¤ï¸â€ğŸ‘¨',
    'ğŸ‘¨â€â¤ï¸â€ğŸ‘¨',
    'ğŸ‘©â€â¤ï¸â€ğŸ‘©',
    'ğŸ‘ª',
    'ğŸ‘¨â€ğŸ‘©â€ğŸ‘¦',
    'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§',
    'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦',
    'ğŸ‘¨â€ğŸ‘©â€ğŸ‘¦â€ğŸ‘¦',
    'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘§',
    'ğŸ‘¨â€ğŸ‘¨â€ğŸ‘¦',
    'ğŸ‘¨â€ğŸ‘¨â€ğŸ‘§',
    'ğŸ‘¨â€ğŸ‘¨â€ğŸ‘§â€ğŸ‘¦',
    'ğŸ‘¨â€ğŸ‘¨â€ğŸ‘¦â€ğŸ‘¦',
    'ğŸ‘¨â€ğŸ‘¨â€ğŸ‘§â€ğŸ‘§',
    'ğŸ‘©â€ğŸ‘©â€ğŸ‘¦',
    'ğŸ‘©â€ğŸ‘©â€ğŸ‘§',
    'ğŸ‘©â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦',
    'ğŸ‘©â€ğŸ‘©â€ğŸ‘¦â€ğŸ‘¦',
    'ğŸ‘©â€ğŸ‘©â€ğŸ‘§â€ğŸ‘§',
    'ğŸ‘¤',
    'ğŸ‘¥',
    'ğŸ«‚',
    'ğŸ‘£',
  ],
  'Animais & Natureza': [
    'ğŸµ',
    'ğŸ’',
    'ğŸ¦',
    'ğŸ¦§',
    'ğŸ¶',
    'ğŸ•',
    'ğŸ¦®',
    'ğŸ•â€ğŸ¦º',
    'ğŸ©',
    'ğŸº',
    'ğŸ¦Š',
    'ğŸ¦',
    'ğŸ±',
    'ğŸˆ',
    'ğŸ¦',
    'ğŸ¯',
    'ğŸ…',
    'ğŸ†',
    'ğŸ´',
    'ğŸ',
    'ğŸ¦„',
    'ğŸ«',
    'ğŸ¦“',
    'ğŸ¦Œ',
    'ğŸ«',
    'ğŸ¦¬',
    'ğŸ®',
    'ğŸ‚',
    'ğŸƒ',
    'ğŸ„',
    'ğŸ·',
    'ğŸ–',
    'ğŸ—',
    'ğŸ½',
    'ğŸ',
    'ğŸ‘',
    'ğŸ',
    'ğŸª',
    'ğŸ«',
    'ğŸ¦™',
    'ğŸ¦’',
    'ğŸ˜',
    'ğŸ¦£',
    'ğŸ¦',
    'ğŸ¦›',
    'ğŸ­',
    'ğŸ',
    'ğŸ€',
    'ğŸ¹',
    'ğŸ°',
    'ğŸ‡',
    'ğŸ¿ï¸',
    'ğŸ¦«',
    'ğŸ¦”',
    'ğŸ¦‡',
    'ğŸ»',
    'ğŸ»â€â„ï¸',
    'ğŸ¨',
    'ğŸ¼',
    'ğŸ¦¥',
    'ğŸ¦¦',
    'ğŸ¦¨',
    'ğŸ¦˜',
    'ğŸ¦¡',
    'ğŸ¦ƒ',
    'ğŸ”',
    'ğŸ“',
    'ğŸ£',
    'ğŸ¤',
    'ğŸ¥',
    'ğŸ¦',
    'ğŸ§',
    'ğŸ•Šï¸',
    'ğŸ¦…',
    'ğŸ¦†',
    'ğŸ¦¢',
    'ğŸ¦‰',
    'ğŸ¦¤',
    'ğŸª¶',
    'ğŸ¦©',
    'ğŸ¦š',
    'ğŸ¦œ',
    'ğŸ¸',
    'ğŸŠ',
    'ğŸ¢',
    'ğŸ¦',
    'ğŸ',
    'ğŸ²',
    'ğŸ‰',
    'ğŸ¦•',
    'ğŸ¦–',
    'ğŸ³',
    'ğŸ‹',
    'ğŸ¦ˆ',
    'ğŸ¬',
    'ğŸŸ',
    'ğŸ ',
    'ğŸ¡',
    'ğŸ¦­',
    'ğŸ™',
    'ğŸ¦‘',
    'ğŸ¦',
    'ğŸ¦',
    'ğŸ¦€',
    'ğŸš',
    'ğŸª¸',
    'ğŸŒ',
    'ğŸ¦‹',
    'ğŸ›',
    'ğŸœ',
    'ğŸ',
    'ğŸª²',
    'ğŸ',
    'ğŸ¦—',
    'ğŸª³',
    'ğŸ¦Ÿ',
    'ğŸ¦ ',
    'ğŸª±',
    'ğŸª°',
    'ğŸª´',
    'ğŸ’',
    'ğŸŒ¸',
    'ğŸ’®',
    'ğŸª·',
    'ğŸµï¸',
    'ğŸŒ¹',
    'ğŸ¥€',
    'ğŸŒº',
    'ğŸŒ»',
    'ğŸŒ¼',
    'ğŸŒ·',
    'ğŸŒ±',
    'ğŸª¹',
    'ğŸªº',
    'ğŸŒ²',
    'ğŸŒ³',
    'ğŸŒ´',
    'ğŸªµ',
    'ğŸŒµ',
    'ğŸŒ¾',
    'ğŸŒ¿',
    'â˜˜ï¸',
    'ğŸ€',
    'ğŸ',
    'ğŸ‚',
    'ğŸƒ',
    'ğŸŒ°',
  ],
  'Comida & Bebida': [
    'ğŸ‡',
    'ğŸˆ',
    'ğŸ‰',
    'ğŸŠ',
    'ğŸ‹',
    'ğŸŒ',
    'ğŸ',
    'ğŸ¥­',
    'ğŸ',
    'ğŸ',
    'ğŸ',
    'ğŸ‘',
    'ğŸ’',
    'ğŸ“',
    'ğŸ«',
    'ğŸ¥',
    'ğŸ…',
    'ğŸ«’',
    'ğŸ¥¥',
    'ğŸ¥‘',
    'ğŸ†',
    'ğŸ¥”',
    'ğŸ¥•',
    'ğŸŒ½',
    'ğŸŒ¶ï¸',
    'ğŸ«‘',
    'ğŸ¥’',
    'ğŸ¥¬',
    'ğŸ¥¦',
    'ğŸ§„',
    'ğŸ§…',
    'ğŸ„',
    'ğŸ¥œ',
    'ğŸ«˜',
    'ğŸŒ°',
    'ğŸ',
    'ğŸ¥',
    'ğŸ¥–',
    'ğŸ«“',
    'ğŸ¥¨',
    'ğŸ¥¯',
    'ğŸ¥',
    'ğŸ§‡',
    'ğŸ§€',
    'ğŸ–',
    'ğŸ—',
    'ğŸ¥©',
    'ğŸ¥“',
    'ğŸ”',
    'ğŸŸ',
    'ğŸ•',
    'ğŸŒ­',
    'ğŸ¥ª',
    'ğŸŒ®',
    'ğŸŒ¯',
    'ğŸ«”',
    'ğŸ¥™',
    'ğŸ§†',
    'ğŸ¥š',
    'ğŸ³',
    'ğŸ¥˜',
    'ğŸ²',
    'ğŸ«•',
    'ğŸ¥£',
    'ğŸ¥—',
    'ğŸ¿',
    'ğŸ§ˆ',
    'ğŸ§‚',
    'ğŸ¥«',
    'ğŸ±',
    'ğŸ˜',
    'ğŸ™',
    'ğŸš',
    'ğŸ›',
    'ğŸœ',
    'ğŸ',
    'ğŸ ',
    'ğŸ¢',
    'ğŸ£',
    'ğŸ¤',
    'ğŸ¥',
    'ğŸ¥®',
    'ğŸ¡',
    'ğŸ¥Ÿ',
    'ğŸ¥ ',
    'ğŸ¥¡',
    'ğŸ¦ª',
    'ğŸ¦',
    'ğŸ§',
    'ğŸ¨',
    'ğŸ©',
    'ğŸª',
    'ğŸ‚',
    'ğŸ°',
    'ğŸ§',
    'ğŸ¥§',
    'ğŸ«',
    'ğŸ¬',
    'ğŸ­',
    'ğŸ®',
    'ğŸ¯',
    'ğŸ¼',
    'ğŸ¥›',
    'â˜•',
    'ğŸ«–',
    'ğŸµ',
    'ğŸ¶',
    'ğŸ¾',
    'ğŸ·',
    'ğŸ¸',
    'ğŸ¹',
    'ğŸº',
    'ğŸ»',
    'ğŸ¥‚',
    'ğŸ¥ƒ',
    'ğŸ«—',
    'ğŸ¥¤',
    'ğŸ§‹',
    'ğŸ§ƒ',
    'ğŸ§‰',
    'ğŸ§Š',
    'ğŸ¥¢',
    'ğŸ½ï¸',
    'ğŸ´',
    'ğŸ¥„',
  ],
  Atividades: [
    'âš½',
    'ğŸ€',
    'ğŸˆ',
    'âš¾',
    'ğŸ¥',
    'ğŸ¾',
    'ğŸ',
    'ğŸ‰',
    'ğŸ¥',
    'ğŸ±',
    'ğŸª€',
    'ğŸ“',
    'ğŸ¸',
    'ğŸ’',
    'ğŸ‘',
    'ğŸ¥',
    'ğŸ',
    'ğŸªƒ',
    'ğŸ¥…',
    'â›³',
    'ğŸª',
    'ğŸ›',
    'ğŸ¹',
    'ğŸ£',
    'ğŸ¤¿',
    'ğŸ¥Š',
    'ğŸ¥‹',
    'ğŸ½',
    'ğŸ›¹',
    'ğŸ›¼',
    'ğŸ›·',
    'â›¸ï¸',
    'ğŸ¥Œ',
    'ğŸ¿',
    'â›·ï¸',
    'ğŸ‚',
    'ğŸª‚',
    'ğŸ‹ï¸',
    'ğŸ‹ï¸â€â™€ï¸',
    'ğŸ‹ï¸â€â™‚ï¸',
    'ğŸ¤¼',
    'ğŸ¤¼â€â™€ï¸',
    'ğŸ¤¼â€â™‚ï¸',
    'ğŸ¤¸',
    'ğŸ¤¸â€â™€ï¸',
    'ğŸ¤¸â€â™‚ï¸',
    'â›¹ï¸',
    'â›¹ï¸â€â™€ï¸',
    'â›¹ï¸â€â™‚ï¸',
    'ğŸ¤º',
    'ğŸ¤¾',
    'ğŸ¤¾â€â™€ï¸',
    'ğŸ¤¾â€â™‚ï¸',
    'ğŸŒï¸',
    'ğŸŒï¸â€â™€ï¸',
    'ğŸŒï¸â€â™‚ï¸',
    'ğŸ‡',
    'ğŸ§˜',
    'ğŸ§˜â€â™€ï¸',
    'ğŸ§˜â€â™‚ï¸',
    'ğŸ„',
    'ğŸ„â€â™€ï¸',
    'ğŸ„â€â™‚ï¸',
    'ğŸŠ',
    'ğŸŠâ€â™€ï¸',
    'ğŸŠâ€â™‚ï¸',
    'ğŸ¤½',
    'ğŸ¤½â€â™€ï¸',
    'ğŸ¤½â€â™‚ï¸',
    'ğŸš£',
    'ğŸš£â€â™€ï¸',
    'ğŸš£â€â™‚ï¸',
    'ğŸ§—',
    'ğŸ§—â€â™€ï¸',
    'ğŸ§—â€â™‚ï¸',
    'ğŸšµ',
    'ğŸšµâ€â™€ï¸',
    'ğŸšµâ€â™‚ï¸',
    'ğŸš´',
    'ğŸš´â€â™€ï¸',
    'ğŸš´â€â™‚ï¸',
    'ğŸ†',
    'ğŸ¥‡',
    'ğŸ¥ˆ',
    'ğŸ¥‰',
    'ğŸ…',
    'ğŸ–ï¸',
    'ğŸµï¸',
    'ğŸ—ï¸',
    'ğŸ«',
    'ğŸŸï¸',
    'ğŸª',
    'ğŸ¤¹',
    'ğŸ¤¹â€â™€ï¸',
    'ğŸ¤¹â€â™‚ï¸',
    'ğŸ­',
    'ğŸ©°',
    'ğŸ¨',
    'ğŸ¬',
    'ğŸ¤',
    'ğŸ§',
    'ğŸ¼',
    'ğŸ¹',
    'ğŸª‡',
    'ğŸ¥',
    'ğŸª˜',
    'ğŸ·',
    'ğŸº',
    'ğŸª—',
    'ğŸ¸',
    'ğŸª•',
    'ğŸ»',
    'ğŸªˆ',
    'ğŸ²',
    'â™Ÿï¸',
    'ğŸ¯',
    'ğŸ³',
    'ğŸ®',
    'ğŸ°',
    'ğŸ§©',
  ],
  'Viagens & Locais': [
    'ğŸš—',
    'ğŸš•',
    'ğŸš™',
    'ğŸ›»',
    'ğŸš',
    'ğŸšŒ',
    'ğŸš',
    'ğŸï¸',
    'ğŸš“',
    'ğŸš‘',
    'ğŸš’',
    'ğŸšš',
    'ğŸš›',
    'ğŸšœ',
    'ğŸ¦¯',
    'ğŸ¦½',
    'ğŸ¦¼',
    'ğŸ©¼',
    'ğŸ›´',
    'ğŸš²',
    'ğŸ›µ',
    'ğŸï¸',
    'ğŸ›º',
    'ğŸ›',
    'ğŸš¨',
    'ğŸš”',
    'ğŸš',
    'ğŸš˜',
    'ğŸš–',
    'ğŸš¡',
    'ğŸš ',
    'ğŸšŸ',
    'ğŸšƒ',
    'ğŸš‹',
    'ğŸš',
    'ğŸš',
    'ğŸš„',
    'ğŸš…',
    'ğŸšˆ',
    'ğŸš‚',
    'ğŸš†',
    'ğŸš‡',
    'ğŸšŠ',
    'ğŸš‰',
    'âœˆï¸',
    'ğŸ›«',
    'ğŸ›¬',
    'ğŸ›©ï¸',
    'ğŸ’º',
    'ğŸ›°ï¸',
    'ğŸš€',
    'ğŸ›¸',
    'ğŸš',
    'ğŸ›¶',
    'â›µ',
    'ğŸš¤',
    'ğŸ›¥ï¸',
    'ğŸ›³ï¸',
    'â›´ï¸',
    'ğŸš¢',
    'ğŸ›Ÿ',
    'âš“',
    'ğŸª',
    'â›½',
    'ğŸš§',
    'ğŸš¦',
    'ğŸš¥',
    'ğŸš',
    'ğŸ—ºï¸',
    'ğŸ—¿',
    'ğŸ—½',
    'ğŸ—¼',
    'ğŸ°',
    'ğŸ¯',
    'ğŸŸï¸',
    'ğŸ¡',
    'ğŸ¢',
    'ğŸ ',
    'â›²',
    'â›±ï¸',
    'ğŸ–ï¸',
    'ğŸï¸',
    'ğŸœï¸',
    'ğŸŒ‹',
    'â›°ï¸',
    'ğŸ”ï¸',
    'ğŸ—»',
    'ğŸ•ï¸',
    'â›º',
    'ğŸ ',
    'ğŸ¡',
    'ğŸ˜ï¸',
    'ğŸšï¸',
    'ğŸ›–',
    'ğŸ—ï¸',
    'ğŸ­',
    'ğŸ¢',
    'ğŸ¬',
    'ğŸ£',
    'ğŸ¤',
    'ğŸ¥',
    'ğŸ¦',
    'ğŸ¨',
    'ğŸª',
    'ğŸ«',
    'ğŸ©',
    'ğŸ’’',
    'ğŸ›ï¸',
    'â›ª',
    'ğŸ•Œ',
    'ğŸ•',
    'ğŸ›•',
    'ğŸ•‹',
    'â›©ï¸',
    'ğŸ›¤ï¸',
    'ğŸ›£ï¸',
    'ğŸ—¾',
    'ğŸ‘',
    'ğŸï¸',
    'ğŸŒ…',
    'ğŸŒ„',
    'ğŸŒ ',
    'ğŸ†',
    'ğŸ‡',
    'ğŸŒ‡',
    'ğŸŒ†',
    'ğŸ™ï¸',
    'ğŸŒƒ',
    'ğŸŒŒ',
    'ğŸŒ‰',
    'ğŸŒ',
  ],
  Objetos: [
    'âŒš',
    'ğŸ“±',
    'ğŸ“²',
    'ğŸ’»',
    'âŒ¨ï¸',
    'ğŸ–¥ï¸',
    'ğŸ–¨ï¸',
    'ğŸ–±ï¸',
    'ğŸ–²ï¸',
    'ğŸ•¹ï¸',
    'ğŸ—œï¸',
    'ğŸ’½',
    'ğŸ’¾',
    'ğŸ’¿',
    'ğŸ“€',
    'ğŸ“¼',
    'ğŸ“·',
    'ğŸ“¸',
    'ğŸ“¹',
    'ğŸ¥',
    'ğŸ“½ï¸',
    'ğŸï¸',
    'ğŸ“',
    'â˜ï¸',
    'ğŸ“Ÿ',
    'ğŸ“ ',
    'ğŸ“º',
    'ğŸ“»',
    'ğŸ™ï¸',
    'ğŸšï¸',
    'ğŸ›ï¸',
    'ğŸ§­',
    'â±ï¸',
    'â²ï¸',
    'â°',
    'ğŸ•°ï¸',
    'âŒ›',
    'â³',
    'ğŸ“¡',
    'ğŸ”‹',
    'ğŸª«',
    'ğŸ”Œ',
    'ğŸ’¡',
    'ğŸ”¦',
    'ğŸ•¯ï¸',
    'ğŸª”',
    'ğŸ§¯',
    'ğŸ›¢ï¸',
    'ğŸ’¸',
    'ğŸ’µ',
    'ğŸ’´',
    'ğŸ’¶',
    'ğŸ’·',
    'ğŸª™',
    'ğŸ’°',
    'ğŸ’³',
    'ğŸªª',
    'ğŸ’',
    'âš–ï¸',
    'ğŸªœ',
    'ğŸ§°',
    'ğŸª›',
    'ğŸ”§',
    'ğŸ”¨',
    'âš’ï¸',
    'ğŸ› ï¸',
    'â›ï¸',
    'ğŸªš',
    'ğŸ”©',
    'âš™ï¸',
    'ğŸª¤',
    'ğŸ§±',
    'â›“ï¸',
    'ğŸ§²',
    'ğŸ”«',
    'ğŸ’£',
    'ğŸ§¨',
    'ğŸª“',
    'ğŸ”ª',
    'ğŸ—¡ï¸',
    'âš”ï¸',
    'ğŸ›¡ï¸',
    'ğŸš¬',
    'âš°ï¸',
    'ğŸª¦',
    'âš±ï¸',
    'ğŸº',
    'ğŸ”®',
    'ğŸ“¿',
    'ğŸ§¿',
    'ğŸª¬',
    'ğŸ’ˆ',
    'âš—ï¸',
    'ğŸ”­',
    'ğŸ”¬',
    'ğŸ•³ï¸',
    'ğŸ©»',
    'ğŸ©¹',
    'ğŸ©º',
    'ğŸ’Š',
    'ğŸ’‰',
    'ğŸ©¸',
    'ğŸ§¬',
    'ğŸ¦ ',
    'ğŸ§«',
    'ğŸ§ª',
    'ğŸŒ¡ï¸',
    'ğŸ§¹',
    'ğŸª ',
    'ğŸ§º',
    'ğŸ§»',
    'ğŸš½',
    'ğŸš°',
    'ğŸš¿',
    'ğŸ›',
    'ğŸ›€',
    'ğŸ§¼',
    'ğŸª¥',
    'ğŸª’',
    'ğŸª®',
    'ğŸ§½',
    'ğŸª£',
    'ğŸ§´',
    'ğŸ›ï¸',
    'ğŸ”‘',
    'ğŸ—ï¸',
    'ğŸšª',
    'ğŸª‘',
    'ğŸ›‹ï¸',
    'ğŸ›ï¸',
    'ğŸ›Œ',
    'ğŸ§¸',
    'ğŸª†',
    'ğŸ–¼ï¸',
    'ğŸª',
    'ğŸªŸ',
    'ğŸ›ï¸',
    'ğŸ›’',
    'ğŸ',
    'ğŸˆ',
    'ğŸ',
    'ğŸ€',
    'ğŸª„',
    'ğŸª…',
    'ğŸŠ',
    'ğŸ‰',
    'ğŸ',
    'ğŸª­',
    'ğŸ®',
    'ğŸ',
    'ğŸª©',
    'ğŸ§§',
    'âœ‰ï¸',
    'ğŸ“©',
    'ğŸ“¨',
    'ğŸ“§',
    'ğŸ’Œ',
    'ğŸ“¥',
    'ğŸ“¤',
    'ğŸ“¦',
    'ğŸ·ï¸',
    'ğŸª§',
    'ğŸ“ª',
    'ğŸ“«',
    'ğŸ“¬',
    'ğŸ“­',
    'ğŸ“®',
    'ğŸ“¯',
    'ğŸ“œ',
    'ğŸ“ƒ',
    'ğŸ“„',
    'ğŸ“‘',
    'ğŸ§¾',
    'ğŸ“Š',
    'ğŸ“ˆ',
    'ğŸ“‰',
    'ğŸ—’ï¸',
    'ğŸ—“ï¸',
    'ğŸ“†',
    'ğŸ“…',
    'ğŸ—‘ï¸',
    'ğŸ“‡',
    'ğŸ—ƒï¸',
    'ğŸ—³ï¸',
    'ğŸ—„ï¸',
    'ğŸ“‹',
    'ğŸ“',
    'ğŸ“‚',
    'ğŸ—‚ï¸',
    'ğŸ—ï¸',
    'ğŸ“°',
    'ğŸ““',
    'ğŸ“”',
    'ğŸ“’',
    'ğŸ“•',
    'ğŸ“—',
    'ğŸ“˜',
    'ğŸ“™',
    'ğŸ“š',
    'ğŸ“–',
    'ğŸ”–',
    'ğŸ§·',
    'ğŸ”—',
    'ğŸ“',
    'ğŸ–‡ï¸',
    'ğŸ“',
    'ğŸ“',
    'ğŸ§®',
    'ğŸ“Œ',
    'ğŸ“',
    'âœ‚ï¸',
    'ğŸ–Šï¸',
    'ğŸ–‹ï¸',
    'âœ’ï¸',
    'ğŸ–Œï¸',
    'ğŸ–ï¸',
    'ğŸ“',
    'âœï¸',
    'ğŸ”',
    'ğŸ”',
    'ğŸ”',
    'ğŸ”',
    'ğŸ”’',
    'ğŸ”“',
  ],
  SÃ­mbolos: [
    'ğŸ©·',
    'â¤ï¸',
    'ğŸ§¡',
    'ğŸ’›',
    'ğŸ’š',
    'ğŸ©µ',
    'ğŸ’™',
    'ğŸ’œ',
    'ğŸ–¤',
    'ğŸ©¶',
    'ğŸ¤',
    'ğŸ¤',
    'ğŸ’”',
    'â£ï¸',
    'ğŸ’•',
    'ğŸ’',
    'ğŸ’“',
    'ğŸ’—',
    'ğŸ’–',
    'ğŸ’˜',
    'ğŸ’',
    'â¤ï¸â€ğŸ©¹',
    'â¤ï¸â€ğŸ”¥',
    'ğŸ’Ÿ',
    'â˜®ï¸',
    'âœï¸',
    'â˜ªï¸',
    'ğŸ•‰ï¸',
    'â˜¸ï¸',
    'ğŸª¯',
    'âœ¡ï¸',
    'ğŸ”¯',
    'ğŸ•',
    'â˜¯ï¸',
    'â˜¦ï¸',
    'ğŸ›',
    'â›',
    'â™ˆ',
    'â™‰',
    'â™Š',
    'â™‹',
    'â™Œ',
    'â™',
    'â™',
    'â™',
    'â™',
    'â™‘',
    'â™’',
    'â™“',
    'ğŸ†”',
    'âš›ï¸',
    'ğŸ‰‘',
    'â˜¢ï¸',
    'â˜£ï¸',
    'ğŸ“´',
    'ğŸ“³',
    'ğŸˆ¶',
    'ğŸˆš',
    'ğŸˆ¸',
    'ğŸˆº',
    'ğŸˆ·ï¸',
    'âœ´ï¸',
    'ğŸ†š',
    'ğŸ’®',
    'ğŸ‰',
    'ãŠ™ï¸',
    'ãŠ—ï¸',
    'ğŸˆ´',
    'ğŸˆµ',
    'ğŸˆ¹',
    'ğŸˆ²',
    'ğŸ…°ï¸',
    'ğŸ…±ï¸',
    'ğŸ†',
    'ğŸ†‘',
    'ğŸ…¾ï¸',
    'ğŸ†˜',
    'âŒ',
    'â­•',
    'ğŸ›‘',
    'â›”',
    'ğŸ“›',
    'ğŸš«',
    'ğŸ’¯',
    'ğŸ’¢',
    'â™¨ï¸',
    'ğŸš·',
    'ğŸš¯',
    'ğŸš³',
    'ğŸš±',
    'ğŸ”',
    'ğŸ“µ',
    'ğŸš­',
    'â—',
    'â•',
    'â“',
    'â”',
    'â€¼ï¸',
    'â‰ï¸',
    'ğŸ”…',
    'ğŸ”†',
    'ã€½ï¸',
    'âš ï¸',
    'ğŸš¸',
    'ğŸ”±',
    'âšœï¸',
    'ğŸ”°',
    'â™»ï¸',
    'âœ…',
    'ğŸˆ¯',
    'ğŸ’¹',
    'â‡ï¸',
    'âœ³ï¸',
    'â',
    'ğŸŒ',
    'ğŸ’ ',
    'â“‚ï¸',
    'ğŸŒ€',
    'ğŸ’¤',
    'ğŸ§',
    'ğŸš¾',
    'â™¿',
    'ğŸ…¿ï¸',
    'ğŸ›—',
    'ğŸˆ³',
    'ğŸˆ‚ï¸',
    'ğŸ›‚',
    'ğŸ›ƒ',
    'ğŸ›„',
    'ğŸ›…',
    'ğŸ›œ',
    'ğŸš¹',
    'ğŸšº',
    'ğŸš¼',
    'ğŸš»',
    'ğŸš®',
    'ğŸ¦',
    'ğŸ“¶',
    'ğŸˆ',
    'ğŸ”£',
    'â„¹ï¸',
    'ğŸ”¤',
    'ğŸ”¡',
    'ğŸ” ',
    'ğŸ†–',
    'ğŸ†—',
    'ğŸ†™',
    'ğŸ†’',
    'ğŸ†•',
    'ğŸ†“',
    '0ï¸âƒ£',
    '1ï¸âƒ£',
    '2ï¸âƒ£',
    '3ï¸âƒ£',
    '4ï¸âƒ£',
    '5ï¸âƒ£',
    '6ï¸âƒ£',
    '7ï¸âƒ£',
    '8ï¸âƒ£',
    '9ï¸âƒ£',
    'ğŸ”Ÿ',
    'ğŸ”¢',
    '#ï¸âƒ£',
    '*ï¸âƒ£',
    'âï¸',
    'â–¶ï¸',
    'â¸ï¸',
    'â¯ï¸',
    'â¹ï¸',
    'âºï¸',
    'â­ï¸',
    'â®ï¸',
    'â©',
    'âª',
    'â«',
    'â¬',
    'â—€ï¸',
    'ğŸ”¼',
    'ğŸ”½',
    'â¡ï¸',
    'â¬…ï¸',
    'â¬†ï¸',
    'â¬‡ï¸',
    'â†—ï¸',
    'â†˜ï¸',
    'â†™ï¸',
    'â†–ï¸',
    'â†•ï¸',
    'â†”ï¸',
    'â†ªï¸',
    'â†©ï¸',
    'â¤´ï¸',
    'â¤µï¸',
    'ğŸ”€',
    'ğŸ”',
    'ğŸ”‚',
    'ğŸ”ƒ',
    'ğŸ”„',
    'ğŸµ',
    'ğŸ¶',
    '',
    'â•',
    'â–',
    'â—',
    'âœ–ï¸',
    'ğŸŸ°',
    'â™¾ï¸',
    'ğŸ’²',
    'ğŸ’±',
    'â„¢ï¸',
    'Â©ï¸',
    'Â®ï¸',
    'ã€°ï¸',
    'â°',
    'â¿',
    'ğŸ”š',
    'ğŸ”™',
    'ğŸ”›',
    'ğŸ”',
    'ğŸ”œ',
    'âœ”ï¸',
    'â˜‘ï¸',
    'ğŸ”˜',
    'âšª',
    'âš«',
    'ğŸ”´',
    'ğŸ”µ',
    'ğŸŸ¤',
    'ğŸŸ£',
    'ğŸŸ¢',
    'ğŸŸ¡',
    'ğŸŸ ',
    'ğŸ”º',
    'ğŸ”»',
    'ğŸ”¸',
    'ğŸ”¹',
    'ğŸ”¶',
    'ğŸ”·',
    'ğŸ”³',
    'ğŸ”²',
    'â–ªï¸',
    'â–«ï¸',
    'â—¾',
    'â—½',
    'â—¼ï¸',
    'â—»ï¸',
    'â¬›',
    'â¬œ',
    'ğŸŸ§',
    'ğŸŸ¦',
    'ğŸŸ¥',
    'ğŸŸ«',
    'ğŸŸª',
    'ğŸŸ©',
    'ğŸŸ¨',
    'ğŸ”ˆ',
    'ğŸ”‡',
    'ğŸ”‰',
    'ğŸ”Š',
    'ğŸ””',
    'ğŸ”•',
    'ğŸ“£',
    'ğŸ“¢',
    'ğŸ—¨ï¸',
    'ğŸ‘ï¸â€ğŸ—¨ï¸',
    'ğŸ’¬',
    'ğŸ’­',
    'ğŸ—¯ï¸',
    'â™ ï¸',
    'â™£ï¸',
    'â™¥ï¸',
    'â™¦ï¸',
    'ğŸƒ',
    'ğŸ´',
    'ğŸ€„',
    'ğŸ•',
    'ğŸ•‘',
    'ğŸ•’',
    'ğŸ•“',
    'ğŸ•”',
    'ğŸ••',
    'ğŸ•–',
    'ğŸ•—',
    'ğŸ•˜',
    'ğŸ•™',
    'ğŸ•š',
    'ğŸ•›',
    'ğŸ•œ',
    'ğŸ•',
    'ğŸ•',
    'ğŸ•Ÿ',
    'ğŸ• ',
    'ğŸ•¡',
    'ğŸ•¢',
    'ğŸ•£',
    'ğŸ•¤',
    'ğŸ•¥',
    'ğŸ•¦',
    'ğŸ•§',
    '0ï¸',
    '1ï¸',
    '2ï¸',
    '3ï¸',
    '4ï¸',
    '5ï¸',
    '6ï¸',
    '7ï¸',
    '8ï¸',
    '9ï¸',
    '#ï¸',
    '*ï¸',
    'â™€ï¸',
    'â™‚ï¸',
    'âš§',
    'âš•ï¸',
  ],
};

const SubjectPage: FC<SubjectExistsProxy.ChildrenProps> = ({ subject }) => {
  const newSubject = !subject;

  const { navigateToGame } = useNavigate();

  const { mySubject, createMySubject, createLightSpotSubject, editSubject } =
    useSubject();
  const { players, myPlayer, isMyTurn, isMyLightSpotTurn } = usePlayer();
  const { currentGame } = useGame();

  const [state, subState] = currentGame?.state ?? [];

  const author = useMemo(
    () => players.find(({ id }) => id === subject?.authorID),
    [players, subject?.authorID],
  );

  const firstNewSubjectColor = !myPlayer?.subjectID
    ? myPlayer?.color
    : undefined;

  const isMySubject = newSubject || subject?.id === mySubject?.id;
  const isMyMainSubject = isMySubject && author?.subjectID === subject?.id;

  const newLightSpot = newSubject && !!myPlayer?.subjectID;

  const [s, set] = useStates({
    editMode: newSubject || newLightSpot,
    loading: false,
    color: subject?.color ?? firstNewSubjectColor,
    icon:
      subject?.icon ??
      faker.helpers.arrayElement(faker.helpers.objectValue(emojis)),
    opened: false,
    description: subject?.description ?? '',
  });

  const descriptionRef = useRef<Input.Element>(null);

  useEffect(() => {
    descriptionRef.current?.focus();
  }, []);

  useTipToast();

  const toast = useToast();

  const isCreatingMySubject = state === 'creating:subjects' && isMyTurn;
  const isCreatingLightSpot =
    state === 'creating:lightSpot' &&
    subState === 'create:subject' &&
    isMyLightSpotTurn;

  useEffect(() => {
    if (!subject) return;
    s.icon = subject.icon;
  }, [subject?.icon, s.editMode]);

  useEffect(() => {
    if (!subject) return;
    s.description = subject.description;
  }, [subject?.description, s.editMode]);

  useEffect(() => {
    if (!subject) return;
    s.color = subject.color;
  }, [subject?.color, s.editMode]);

  function handleSubmit() {
    if (isCreatingMySubject) {
      if (!s.icon || !s.description) return;

      s.loading = true;

      createMySubject({ icon: s.icon, description: s.description })
        .catch(toast.error)
        .finally(navigateToGame)
        .finally(set('loading', false));

      return;
    }

    if (isCreatingLightSpot) {
      if (!s.icon || !s.color || !s.description) return;

      s.loading = true;

      createLightSpotSubject({
        icon: s.icon,
        color: s.color,
        description: s.description,
      })
        .catch(toast.error)
        .finally(navigateToGame)
        .finally(set('loading', false));

      return;
    }

    if (!subject) return;

    s.loading = true;

    editSubject(subject.id, {
      icon: s.icon,
      description: s.description,
      color: s.color,
    })
      .catch(toast.error)
      .finally(set('editMode', false))
      .finally(set('loading', false));
  }

  const iconRef = useRef<HTMLButtonElement>(null);

  const iconSelectorReadonly = !isMySubject || !s.editMode;

  const descriptionInputDisabled = !s.editMode;

  const showCancelButton = !newSubject;

  const showColorSelector = (!isMyMainSubject || newLightSpot) && s.editMode;
  const colorSelectorDisabled = s.loading;

  const showEditButton = isMySubject && !s.editMode;

  const cancelDisabled = s.loading;
  const submitDisabled =
    !s.icon ||
    !s.description ||
    !s.color ||
    s.loading ||
    (s.icon === subject?.icon && s.description === subject.description);

  function renderLabel() {
    let children: ReactNode = null;

    if (isCreatingLightSpot)
      children = (
        <>
          <em className={s.color}>Seu</em> Elemento
        </>
      );
    else if (!subject?.id || subject.id === mySubject?.id)
      children = (
        <>
          <em className={s.color}>Seu</em> Elemento
        </>
      );
    else if (author)
      children = (
        <>
          Elemento de <em className={author.color}>{author.name}</em>
        </>
      );

    return children;
  }

  return (
    <BakingPaper
      onClick={() => {
        if (isCreatingMySubject) return;
        if (isCreatingLightSpot) return;

        navigateToGame();
      }}
    >
      <Content onClick={(e) => e.stopPropagation()}>
        <Ripple ref={iconRef}>
          <IconSelector icon={s.icon} $readOnly={iconSelectorReadonly} />
        </Ripple>
        <Popover anchorRef={iconRef} onToggle={set('opened')}>
          <PopoverContent>
            {Object.entries(emojis).map(([key, icons]) => (
              <Fragment key={key}>
                <PopoverSectionTitle>{key}</PopoverSectionTitle>

                <PopoverSection>
                  {icons.map((icon) => (
                    <IconOption key={icon} onClick={set('icon', icon)}>
                      {icon}
                    </IconOption>
                  ))}
                </PopoverSection>
              </Fragment>
            ))}
          </PopoverContent>
        </Popover>

        {showColorSelector && (
          <ColorSelector
            disabled={colorSelectorDisabled}
            defaultValue={s.color}
            onChange={set('color')}
          />
        )}

        <Input
          // style
          color={s.color}
          variant='baking-paper'
          label={renderLabel()}
          // params
          ref={descriptionRef}
          id='description'
          placeholder='Descreva...'
          disabled={descriptionInputDisabled}
          defaultValue={s.description}
          value={s.description}
          // handle
          onChange={set('description')}
        />
        {s.editMode && (
          <Buttons>
            {showCancelButton && (
              <Button
                disabled={cancelDisabled}
                onClick={set('editMode', false)}
              >
                Cancelar
              </Button>
            )}

            <Button
              color={s.color}
              loading={s.loading}
              disabled={submitDisabled}
              onClick={handleSubmit}
            >
              {newSubject ? 'Criar' : 'Editar'}
            </Button>
          </Buttons>
        )}

        {showEditButton && (
          <IconButton
            className='edit'
            icon={<Icon.Pencil />}
            size='small'
            onClick={set('editMode', true)}
          />
        )}
      </Content>
    </BakingPaper>
  );
};

export default SubjectPage;
